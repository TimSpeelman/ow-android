(this["webpackJsonpow-react"]=this["webpackJsonpow-react"]||[]).push([[0],{106:function(e,t,n){e.exports=n.p+"static/media/qr-scan.c24fd00a.svg"},111:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(49),c=n.n(i),l=n(4),s=n(16),u=(n(33),n(34),n(21)),o=n.n(u),m=n(1),d=Object(a.createContext)({}),f=function(){return Object(a.useContext)(d)},v=Object(a.createContext)({}),h=function(){return Object(a.useContext)(v)},E=n(22),p=function(e){e.children;var t=Object(E.a)(e,["children"]);return r.a.createElement("span",{className:"fas fa-".concat(Object.keys(t)[0])})},b=function(){var e=f(),t=e.open,n=e.setOpen;return r.a.createElement(y,{toggleMenu:function(e){return n(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.find((function(e){return!0===e||!1===e}))||!1}(e,t))},isOpen:t})},y=function(e){var t=e.toggleMenu,n=e.isOpen,a=h().path;return r.a.createElement("div",{className:o()({"side-menu-open":n})},r.a.createElement("div",{className:"side-menu-close",onClick:function(){return t(!1)}},r.a.createElement(p,{times:!0})),r.a.createElement("div",{className:"side-menu-backdrop",onClick:function(){return t(!1)}}),r.a.createElement("div",{className:"side-menu"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(l.b,{to:"/attestations",onClick:function(){return t(!1)}},r.a.createElement(p,{"id-card":!0}),r.a.createElement("span",null,"Credentials"))),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/contacts",onClick:function(){return t(!1)}},r.a.createElement(p,{users:!0}),r.a.createElement("span",null,"Contacts"))),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/",onClick:function(){return t(!1)},className:"disabled"},r.a.createElement(p,{"info-circle":!0}),r.a.createElement("span",null,"About"))),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/",onClick:function(){return t(!1)},className:"disabled"},r.a.createElement(p,{cog:!0}),r.a.createElement("span",null,"Settings"))),r.a.createElement("p",null,"Using agent: ",a))))},g=function(e){var t=e.onClick,n=e.isPending,a=e.primary,i=e.children,c=Object(E.a)(e,["onClick","isPending","primary","children"]);return r.a.createElement("button",Object.assign({},c,{onClick:t,className:o()(["btn",{pending:n,primary:a,secondary:!a}])}),r.a.createElement("span",null,i),r.a.createElement("div",{className:"lds-ellipsis"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))},O=n(23),k=n.n(O),N=n(52),S=n.n(N),w=function(e){return r.a.createElement("div",{className:"card-item"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"logo-box"},r.a.createElement("img",{style:{width:"80%"},src:e.imageUrl,alt:""})),r.a.createElement("div",{className:"text-box"},r.a.createElement("div",{className:"primary"},e.title),r.a.createElement("div",{className:"secondary"},e.issuerName)),e.withQRs?r.a.createElement("div",{className:"tool"},r.a.createElement("span",{onClick:function(){return e.onDisplayQR&&e.onDisplayQR(e.title)}},r.a.createElement(p,{qrcode:!0}))):""),e.showDetails?r.a.createElement("div",{className:"credential-details"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"text-box"},r.a.createElement("div",{className:"primary"},e.title),r.a.createElement("div",{className:"secondary"},e.value)),e.withQRs?r.a.createElement("div",{className:"tool"},r.a.createElement("span",{onClick:function(){return e.onDisplayQR&&e.onDisplayQR(e.title)}},r.a.createElement(p,{qrcode:!0}))):"")):"",e.withQRs&&e.qrValue?r.a.createElement("div",{className:"qr-code"},r.a.createElement(S.a,{text:e.qrValue},r.a.createElement(k.a,{value:e.qrValue,size:256,level:"M"}))):"",e.showMeta?r.a.createElement("div",{className:"credential-meta"},r.a.createElement("table",null,r.a.createElement("tbody",null,(e.metadata||[]).map((function(e){return r.a.createElement("tr",{key:e.key.toString()},r.a.createElement("td",null,e.key),r.a.createElement("td",null,e.value))}))))):"")},j=function(e){var t=f().setOpen;return r.a.createElement(C,Object.assign({openMenu:function(){return t(!0)}},e))},C=function(e){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("div",{className:"content"},r.a.createElement(l.b,{className:"back-arrow",to:e.backUrl},r.a.createElement(p,{"chevron-left":!0})),r.a.createElement("div",{className:"page-title"},e.pageTitle),r.a.createElement("div",{className:"burger-menu",onClick:e.openMenu},r.a.createElement(p,{bars:!0}))),r.a.createElement("div",{className:"background"})),r.a.createElement("div",{className:"after-header"}," "))},R=n(25),I=Object(a.createContext)({}),T=function(){return Object(a.useContext)(I)};var D=function(e){var t=e.request,n=e.onSubmitConsent,i=(T().fromLanguageDict,Object(a.useState)(!1)),c=Object(m.a)(i,2),l=c[0],s=c[1],u=function(e){s(!0),n(e)},o={success:t.resolve.attributes.filter((function(e){return"success"===e.status})).map((function(e){return e.results[0]})),ambiguous:t.resolve.attributes.filter((function(e){return"ambiguous"===e.status})),missing:t.resolve.attributes.filter((function(e){return"missing"===e.status}))};return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(j,{pageTitle:"Consent to Share",backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,"Do you wish to share?"),o.missing.length>0&&r.a.createElement("div",null,r.a.createElement("p",null,"You are missing the following attributes:"),r.a.createElement("ul",null,o.missing.map((function(e){return r.a.createElement("li",null,e.request.name)})))),r.a.createElement("p",null,"X requires the following information:"),o.success.map((function(e){return r.a.createElement(w,{key:e.hash,title:e.name,issuerName:e.signer_mid_b64,imageUrl:"",value:e.value,showDetails:!0})})),r.a.createElement("p",null,"Do you wish to share these credentials?"),r.a.createElement(g,{onClick:function(){return u(!0)},isPending:l,primary:!0},"Share these credentials"),r.a.createElement(g,{onClick:function(){return u(!1)},disabled:l},"Do not share")))},_=function(){return r.a.createElement(D,{onSubmitConsent:function(){},request:{request:{attributes:[],verifier_id:"VRFID"},resolve:{status:"success",attributes:[{status:"success",ref:"a",request:{name:"name",format:"id_metadata",ref:"a"},results:[{hash:"xsd",value:"Tim Speelman",format:"id_metadata",name:"name",signer_mid_b64:"xyz",metadata:1}],responses:[{hash:"xsd",ref:"a"}]},{status:"success",ref:"a",request:{name:"age",format:"id_metadata",ref:"a"},results:[{hash:"xsd",value:"28",format:"id_metadata",name:"age",signer_mid_b64:"xyz",metadata:1}],responses:[{hash:"xsd",ref:"a"}]}]}}})},A=function(e){return r.a.createElement("select",{value:e.value,onChange:function(t){return e.onChange(t.target.value)}},e.emptyMessage?r.a.createElement("option",{value:"",disabled:!0,hidden:!0},e.emptyMessage):"",e.options.map((function(e){return r.a.createElement("option",{value:e.value,key:e.value},e.label)})))},x=Object(a.createContext)({}),q=function(){return Object(a.useContext)(x)},P=function(e){var t=e.onSubmitRequest,n=T().langCode,i=q().state,c=Object(a.useState)(""),s=Object(m.a)(c,2),u=s[0],o=s[1],d=Object(a.useState)(""),f=Object(m.a)(d,2),v=f[0],h=f[1],E=Object(a.useState)(!0),p=Object(m.a)(E,1)[0],b=Object(a.useState)(!1),y=Object(m.a)(b,2),O=y[0],k=y[1];Object(a.useEffect)((function(){return h("")}),[u]);var N=Object(a.useMemo)((function(){return function(e,t){return Object.keys(e).map((function(n){return{value:e[n].id,label:e[n].title[t]}})).sort((function(e,t){return e.label>t.label?-1:1}))}(i.providers,n)}),[i.providers,n]),S=Object(a.useMemo)((function(){return function(e,t,n){var a=e[t];return a?Object.values(a.recipes).map((function(e){return{value:e.name,label:e.title[n]}})).sort((function(e,t){return e.label>t.label?-1:1})):[]}(i.providers,u,n)}),[i.providers,u,n]);return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(j,{pageTitle:"Request Credential",backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,"Request new credentials"),0===N.length?r.a.createElement("div",null,r.a.createElement("p",null,"You don't know any providers yet.. Please add one to your contacts first."),r.a.createElement(l.b,{to:"/contacts"},r.a.createElement(g,{primary:!0},"Go to contacts"))):r.a.createElement("div",null,r.a.createElement("p",null,"Please pick a provider and the credential you wish to obtain."),r.a.createElement(A,{options:N,value:u,onChange:o,emptyMessage:"Select a provider please"})),u?r.a.createElement(A,{options:S,value:v,onChange:h,emptyMessage:"Select your attribute"}):"",r.a.createElement("br",null),r.a.createElement("br",null),!1===p?r.a.createElement("p",null,"This provider seems to be offline.."):"",u&&v?r.a.createElement(g,{onClick:function(){k(!0),t(u,v)},isPending:O,disabled:!p||!u||!v},"Request Attribute"):""))};var U=function(e){var t=e.pageTitle,n=e.messageTitle,a=e.messageBody;return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(j,{pageTitle:t,backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,n),r.a.createElement("p",null,a),r.a.createElement(l.b,{to:"/"},r.a.createElement(g,null,"OK"))))},L=null;function M(e){var t=q();return L!==t.state&&console.log("useSelector: STATE updated"),L=t.state,e(t.state)}var V=n(12);function F(e,t){var n,a;return function(r){return void 0!==n&&n===r?a:(n=r,a=e.apply(t,[r]))}}function H(e){return e.attributes.map((function(t){return Object(V.a)({},t,{provider:Q(t.signer_mid_b64)(e)})}))}function B(e){return Object.values(e.providers)}function Q(e){return F((function(t){return Object.values(t.providers).find((function(t){return t.mid_b64===e}))}),null)}var K,W,Y=function(e){var t=e.receiveRequest,n=e.onSubmitConsent,i=T().fromLanguageDict,c=M(Q(t.provider)),l=Object(a.useState)(!1),s=Object(m.a)(l,2),u=s[0],o=s[1],d=t.attributes,f=function(e){o(!0),n(e)};return t?r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(j,{pageTitle:"Receive Credentials",backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,"Step 2: Save New Credentials"),r.a.createElement("p",null,i(c.title)," offers you the following credentials:"),d.map((function(e){return r.a.createElement(w,{key:e.name,title:i(e.title),issuerName:i(c.title),imageUrl:c.logo_url,value:e.value,showDetails:!0,showMeta:!0,metadata:[{key:"Signed by",value:i(c.title)},{key:"Created at",value:"2018-09-01 13:20:00 CET"},{key:"Valid until",value:"2020-09-01 13:20:00 CET"}]})})),r.a.createElement("p",null,"Do you wish to save these credentials?"),r.a.createElement(g,{onClick:function(){return f(!0)},primary:!0,isPending:u},"Save these credentials"),r.a.createElement(g,{onClick:function(){return f(!1)},disabled:u},"Do not save"))):r.a.createElement("div",null,"...ReceiveAttributesPage...")},G=function(e){var t=e.shareRequest,n=e.onSubmitConsent,i=T().fromLanguageDict,c=M(Q(t.receiver)),l=M(H),s=t.attributeNames.map((function(e){return l.find((function(t){return t.name===e}))})).filter((function(e){return!!e})),u=Object(a.useState)(!1),o=Object(m.a)(u,2),d=o[0],f=o[1],v=function(e){f(!0),n(e)};return c?r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(j,{pageTitle:"Request Credential",backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,"Step 1: Share Information"),r.a.createElement("p",null,i(c.title)," requires the following information:"),s.map((function(e){return e?r.a.createElement(w,{key:e.hash,title:i(e.title),issuerName:i(e.provider.title),imageUrl:e.provider.logo_url,value:e.value,showDetails:!0}):""})),r.a.createElement("p",null,"Do you wish to share these credentials?"),r.a.createElement(g,{onClick:function(){return v(!0)},isPending:d,primary:!0},"Share these credentials"),r.a.createElement(g,{onClick:function(){return v(!1)},disabled:d},"Do not share"))):r.a.createElement("div",null,"...ShareRequestPage No Provider...")},J=n(11),z=n.n(J),X=n(2),$=n(3),Z=function(){function e(){Object(X.a)(this,e),this.listeners=[]}return Object($.a)(e,[{key:"fire",value:function(e){this.listeners.forEach((function(t){return t(e)}))}},{key:"on",value:function(e){var t=this;return this.listeners.push(e),function(){return t.unsubscribe(e)}}},{key:"pipe",value:function(e){return this.on((function(t){return e.fire(t)}))}},{key:"unsubscribe",value:function(e){this.listeners=this.listeners.filter((function(t){return t!==e}))}}]),e}();!function(e){e[e.INIT=0]="INIT",e[e.SHARE=1]="SHARE",e[e.RECEIVE=2]="RECEIVE",e[e.DONE=3]="DONE"}(K||(K={})),function(e){e[e.PENDING=0]="PENDING",e[e.COMPLETE=1]="COMPLETE",e[e.ABORTED=2]="ABORTED",e[e.FAILED=3]="FAILED"}(W||(W={}));var ee,te=function(){function e(t,n,a){Object(X.a)(this,e),this.providersService=t,this.walletService=n,this.attributeService=a,this.step=K.INIT,this.status=W.PENDING,this.hookStep=new Z,this.hookUserConsentToReceive=new Z,this.hookStatus=new Z,this.providerKey=void 0,this.procedureKey=void 0,this.message="",this.receiveRequest=null}return Object($.a)(e,[{key:"userStartsRequest",value:function(e,t){this.providerKey=e,this.procedureKey=t,this.requirements&&0===this.requirements.length?this.executeProcedure():this.askUserToShare()}},{key:"userConsentsToShare",value:function(e){e?this.executeProcedure():this.abortProcedure()}},{key:"userConsentsToReceive",value:function(e){this.hookUserConsentToReceive.fire(e),e?this.saveReceivedCredentials():this.abortProcedure()}},{key:"askUserToShare",value:function(){this.setStep(K.SHARE)}},{key:"executeProcedure",value:function(){var e,t,n,a,r=this;return z.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e=this.providerKey,t=this.procedureKey,e&&t){i.next=3;break}return i.abrupt("return");case 3:return n=function(e){return r.askUserToReceive(e),new Promise((function(e){return r.hookUserConsentToReceive.on(e)}))},i.prev=4,i.next=7,z.a.awrap(this.walletService.requestOWAttestSharingApproved(e,t,n));case 7:if(!(a=i.sent)){i.next=16;break}return a.forEach((function(e){return r.attributeService.storeAttribute(e)})),this.showMessage("The attributes were successfully added to your identity."),this.setStatus(W.COMPLETE),this.done(),i.abrupt("return",a);case 16:return this.showMessage("The attributes were not added to your identity."),this.setStatus(W.ABORTED),this.done(),i.abrupt("return",[]);case 20:i.next=27;break;case 22:i.prev=22,i.t0=i.catch(4),this.showMessage("Something went wrong"),console.error("Something went wrong",i.t0),this.setStatus(W.FAILED);case 27:case"end":return i.stop()}}),null,this,[[4,22]])}},{key:"askUserToReceive",value:function(e){var t;console.log("Asking user",e),this.receiveRequest={attributes:e,done:function(){},id:"",provider:null===(t=this.provider)||void 0===t?void 0:t.mid_b64,reason:"You asked for them"},this.setStep(K.RECEIVE)}},{key:"saveReceivedCredentials",value:function(){}},{key:"done",value:function(){this.setStep(K.DONE)}},{key:"abortProcedure",value:function(){this.setStatus(W.ABORTED),this.setStep(K.DONE)}},{key:"showMessage",value:function(e){this.message=e}},{key:"setStep",value:function(e){this.step=e,this.hookStep.fire(e)}},{key:"setStatus",value:function(e){this.status=e,this.hookStatus.fire(e)}},{key:"provider",get:function(){return this.providerKey?this.providersService.providers[this.providerKey]:null}},{key:"procedure",get:function(){return this.provider&&this.procedureKey&&this.provider.recipes[this.procedureKey]}},{key:"requirements",get:function(){var e;return this.procedure&&((null===(e=this.procedure.verify_request)||void 0===e?void 0:e.attributes)||[]).map((function(e){return e.name}))}},{key:"shareRequest",get:function(){return this.requirements?{attributeNames:this.requirements,done:function(){},id:"",reason:"Some reason",receiver:this.provider.mid_b64}:null}}]),e}(),ne=n(20),ae=n(6),re=n.n(ae),ie=n(57),ce=function(){function e(t){Object(X.a)(this,e),this.state=t}return Object($.a)(e,[{key:"storeAttribute",value:function(e){var t=this.state;this.state.store({attributes:[].concat(Object(R.a)(t.attributes),[e])})}},{key:"attributes",get:function(){return this.state.attributes}}]),e}(),le=function(){function e(t){Object(X.a)(this,e),this.axios=t}return Object($.a)(e,[{key:"getState",value:function(){return Promise.resolve(JSON.parse(localStorage.getItem("state")||"{}"))}},{key:"putState",value:function(e){return Promise.resolve(localStorage.setItem("state",JSON.stringify(e)))}}]),e}(),se=function(){function e(t){Object(X.a)(this,e),this.localApi=t,this.stateChangeHook=new Z,this._state={attributes:[],providers:{}},this.fetch()}return Object($.a)(e,[{key:"state",get:function(){return this._state}},{key:"attributes",get:function(){return this._state.attributes}},{key:"providers",get:function(){return this._state.providers}}]),Object($.a)(e,[{key:"fetch",value:function(){var e=this;return this.localApi.getState().then((function(t){return e.updateState(t)}))}},{key:"store",value:function(e){return this.updateState(e),this.localApi.putState(this.state)}},{key:"updateState",value:function(e){this._state=Object(V.a)({},this.state,{},e),console.log("UPDATED LOCAL STATE",this._state),this.stateChangeHook.fire(this.state)}}]),e}(),ue=n(8),oe=function(){function e(t,n,a,r){Object(X.a)(this,e),this.providersService=t,this.localState=n,this.ipv8=a,this.recipeClient=r}return Object($.a)(e,[{key:"requestOWAttestSharingApproved",value:function(e,t,n){var a,r,i,c,l,s,u,o,m,d,f,v,h,E;return z.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return r=this.providersService.providers[e],i=r.recipes[t],c=((null===(a=i.verify_request)||void 0===a?void 0:a.attributes)||[]).map((function(e){return e.name})),l=this.localState.attributes.filter((function(e){return c.indexOf(e.name)>=0})).reduce((function(e,t){return Object(V.a)({},e,Object(ue.a)({},t.name,t.value))}),{}),u=this.recipeClient.createProcess(i),p.next=7,z.a.awrap(this.ipv8.api.listAttestations());case 7:return o=p.sent,i.verify_request&&(s={attributes:null===(m=i.verify_request)||void 0===m?void 0:m.attributes.map((function(e,t){var n;return{hash:(null===(n=o.find((function(t){return t.attribute_name===e.name})))||void 0===n?void 0:n.attribute_hash)||"",ref:e.name,value:l[e.name]}})),request_hash:"",subject_id:this.recipeClient.myId},u.allowVerification(s)),d=u.createRequest(s),p.next=12,z.a.awrap(re.a.post(i.service_endpoint,{request:d}));case 12:if(f=p.sent,v=f.data.offer,h=v.attributes.map((function(e){var t;return{name:e.name,value:e.value,title:(null===(t=i.attributes.find((function(t){return t.name===e.name})))||void 0===t?void 0:t.title)||{},signer_mid_b64:v.attester_id}})),u.validateOffer(v)){p.next=18;break}return console.warn("Server offer did not pass validation"),p.abrupt("return",[]);case 18:return p.next=20,z.a.awrap(n(h));case 20:if(p.sent){p.next=23;break}return p.abrupt("return",[]);case 23:return p.next=25,z.a.awrap(u.requestAttestation(v));case 25:if(E=p.sent,console.log("Received result",E),E){p.next=29;break}return p.abrupt("return",[]);case 29:return p.abrupt("return",E.map((function(e){var t=i.attributes.find((function(t){return t.name===e.name}));if(e&&t)return{name:e.name,value:e.value,hash:e.hash,time:Date.now(),provider_title:r.title,title:t.title,type:t.format,metadata:e.metadata,signer_mid_b64:e.signer_mid_b64};throw new Error("Attestation or procedure not found")})));case 30:case"end":return p.stop()}}),null,this)}}]),e}();!function(e){e[e.ONLINE=0]="ONLINE",e[e.PENDING=1]="PENDING",e[e.OFFLINE=2]="OFFLINE"}(ee||(ee={}));var me=function(){function e(t){Object(X.a)(this,e),this.state=t,this.online={}}return Object($.a)(e,[{key:"checkIsOnline",value:function(e){return e in this.online?this.online[e]===ee.ONLINE:(this.pingForOnline(e),!1)}},{key:"pingForOnline",value:function(e){var t,n=this;return this.online[e]=ee.PENDING,Promise.race([this.getByURL(this.state.providers[e].url).then((function(){return!0})).catch((function(){return!1})),(t=1e3,new Promise((function(e){return setTimeout(e,t)}))).then((function(){return!1}))]).then((function(t){n.online[e]=t?ee.ONLINE:ee.OFFLINE}))}},{key:"getByURL",value:function(e){return re.a.get(e).then((function(e){return e.data}))}},{key:"addByURL",value:function(e){var t=this;return this.getByURL(e).then((function(e){return t.addOrUpdate(e),e}))}},{key:"addOrUpdate",value:function(e){var t=this.state;return this.state.store({providers:Object(V.a)({},t.providers,Object(ue.a)({},e.id,e))})}},{key:"providers",get:function(){return this.state.providers}}]),e}(),de=n(54),fe=n.n(de),ve=function(){function e(){Object(X.a)(this,e),this.hook=new Z,this.index=0,this.intervalHandle=null}return Object($.a)(e,[{key:"listen",value:function(e){this.hook.on(e)}},{key:"start",value:function(e){var t=this;this.intervalHandle=setInterval((function(){return t.hook.fire(t.index++)}),e)}},{key:"stop",value:function(){clearInterval(this.intervalHandle)}}]),e}(),he=function(){function e(t){Object(X.a)(this,e),this.options=t,this.handles=[]}return Object($.a)(e,[{key:"register",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new Ee(e,Object(V.a)({},this.options,{},n));return this.handles.push(a),a.onDestroy((function(){return t.removeHandle(a)})),a}},{key:"resolveReference",value:function(e){return this.handles.find((function(t){return t.references.find((function(t){return t.id===e.id}))}))}},{key:"removeHandle",value:function(e){this.handles=this.handles.filter((function(t){return t!==e}))}}]),e}(),Ee=function(){function e(t,n){var a=this;Object(X.a)(this,e),this.value=t,this.options=n,this.references=[],this.freshRefHook=new Z,this.invalidationHook=new Z,this.destroyHook=new Z,this.interval=new ve,this.interval.listen((function(){return a.createNewReference()}))}return Object($.a)(e,[{key:"onNewReference",value:function(e){return this.freshRefHook.on(e)}},{key:"onInvalidate",value:function(e){return this.invalidationHook.on(e)}},{key:"onDestroy",value:function(e){return this.destroyHook.on(e)}},{key:"refreshAtInterval",value:function(e){this.createNewReference(),this.interval.start(e)}},{key:"stopRefreshing",value:function(){this.interval.stop()}},{key:"destroy",value:function(){var e=this;this.stopRefreshing(),this.references.forEach((function(t){return e.expireReference(t)})),this.destroyHook.fire()}},{key:"createNewReference",value:function(){var e=this,t={id:fe()()};this.references.push(t),setTimeout((function(){return e.expireReference(t)}),this.options.millisToExpire),this.freshRefHook.fire(t)}},{key:"expireReference",value:function(e){this.references.find((function(t){return t===e}))&&(this.references=this.references.filter((function(t){return t!==e})),this.invalidationHook.fire(e),this.options.destroyWhenNoReferences&&0===this.references.length&&this.destroy())}}]),e}(),pe=window.location.hash.match(/port=([0-9]+)/),be=new ie.a,ye=(pe?pe[1]:null)||be.get("port")||"8124";be.set("port",ye);var ge="http://localhost:".concat(ye),Oe=new le(re.a.create({baseURL:ge+"/api"})),ke=new se(Oe),Ne=new ce(ke),Se=new ne.a.IPv8Service(ge,1e3);Se.start();var we=new he({destroyWhenNoReferences:!0,millisToExpire:2e4});window.peercalls=function(e,t){var n=we.resolveReference({id:t});n?(console.log("Peer '".concat(e,"' called. Handle found!")),n.value(e)):console.log("Peer '".concat(e,"' called. Could not find handle.."))};var je,Ce,Re=null,Ie=null;!function(e){e[e.INIT=0]="INIT",e[e.SHARE=1]="SHARE",e[e.RECEIVE=2]="RECEIVE",e[e.DONE=3]="DONE"}(je||(je={}));var Te,De,_e=function(){var e=Object(a.useState)(je.INIT),t=Object(m.a)(e,2),n=t[0],i=t[1];switch(Object(a.useEffect)((function(){setTimeout((function(){(Ce=new te(Re,Ie,Ne)).hookStep.on((function(e){console.log(e),i(e)}))}),2e3)}),[]),n){case je.INIT:return r.a.createElement(P,{onSubmitRequest:function(e,t){return Ce.userStartsRequest(e,t)}});case je.SHARE:return r.a.createElement(G,{shareRequest:Ce.shareRequest,onSubmitConsent:function(e){return Ce.userConsentsToShare(e)}});case je.RECEIVE:return r.a.createElement(Y,{receiveRequest:Ce.receiveRequest,onSubmitConsent:function(e){return Ce.userConsentsToReceive(e)}});case je.DONE:return r.a.createElement(U,{messageBody:Ce.message,messageTitle:Ce.status===W.COMPLETE?"Success":"No success",pageTitle:"Create"});default:return r.a.createElement("div",null,"This should not happen")}},Ae=function(e){var t=e.verificationOffer,n=e.onSubmitConsent,i=Object(a.useState)(!1),c=Object(m.a)(i,2),l=c[0],s=c[1],u=function(e){s(!0),n(e)};return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(j,{pageTitle:"Verify a Credential",backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,"Verifying by QR"),r.a.createElement("p",null,"Do you wish to verify the following?"),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Member ID"),r.a.createElement("td",null,t.mid)),r.a.createElement("tr",null,r.a.createElement("td",null,"Attribute Name"),r.a.createElement("td",null,t.attribute_name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Attribute Hash"),r.a.createElement("td",null,t.attribute_hash)),r.a.createElement("tr",null,r.a.createElement("td",null,"Attribute Value"),r.a.createElement("td",null,t.attribute_value)))),r.a.createElement(g,{onClick:function(){return u(!0)},isPending:l,primary:!0},"Verify"),r.a.createElement(g,{onClick:function(){return u(!1)},disabled:l},"Cancel")))};!function(e){e[e.INIT=0]="INIT",e[e.CONFIRM=1]="CONFIRM",e[e.DONE=2]="DONE"}(Te||(Te={})),function(e){e[e.PENDING=0]="PENDING",e[e.COMPLETE=1]="COMPLETE",e[e.ABORTED=2]="ABORTED",e[e.FAILED=3]="FAILED"}(De||(De={}));var xe,qe,Pe=function(){function e(t,n){Object(X.a)(this,e),this.walletService=t,this.verifierService=n,this.step=Te.INIT,this.status=De.PENDING,this.hookStep=new Z,this.hookStatus=new Z,this.offer=void 0,this.message=""}return Object($.a)(e,[{key:"userStartsRequest",value:function(e){this.offer=e,this.setStep(Te.CONFIRM)}},{key:"userConsentsToVerify",value:function(e){e?this.executeProcedure():this.abortProcedure()}},{key:"executeProcedure",value:function(){var e=this;return z.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.verifierService.verify(this.offer.mid,[{attribute_hash:this.offer.attribute_hash,attribute_value:this.offer.attribute_value,attribute_name:this.offer.attribute_name}]).then((function(t){e.showVerificationResult(t)}));case 1:case"end":return t.stop()}}),null,this)}},{key:"showVerificationResult",value:function(e){this.showMessage("The result was: "+(e?"verified!":"unverified..")),this.done()}},{key:"done",value:function(){this.setStep(Te.DONE)}},{key:"abortProcedure",value:function(){this.showMessage("We have not verified the credential."),this.setStatus(De.ABORTED),this.setStep(Te.DONE)}},{key:"showMessage",value:function(e){this.message=e}},{key:"setStep",value:function(e){this.step=e,this.hookStep.fire(e)}},{key:"setStatus",value:function(e){this.status=e,this.hookStatus.fire(e)}}]),e}();!function(e){e[e.INIT=0]="INIT",e[e.CONFIRM=1]="CONFIRM",e[e.DONE=2]="DONE"}(xe||(xe={}));var Ue,Le=function(e){var t=e.verifyOffer,n=Object(a.useState)(xe.INIT),i=Object(m.a)(n,2),c=i[0],l=i[1],s=h().services;Object(a.useEffect)((function(){(qe=new Pe(s.owService,s.ipv8Service.verifierService)).hookStep.on((function(e){console.log(e),l(e)})),qe.userStartsRequest(t)}),[]);switch(c){case xe.INIT:return r.a.createElement("div",null);case xe.CONFIRM:return r.a.createElement(Ae,{onSubmitConsent:function(e){return qe.userConsentsToVerify(e)},verificationOffer:qe.offer});case xe.DONE:return r.a.createElement(U,{pageTitle:"Verify a Credential",messageTitle:"Verification Result",messageBody:qe.message});default:return r.a.createElement("div",null,"This should not happen")}};!function(e){e.Succeeded="Succeeded",e.Failed="Failed",e.Unmatched="Unmatched"}(Ue||(Ue={}));var Me=function(){function e(t){Object(X.a)(this,e),this.decoders=t}return Object($.a)(e,[{key:"decode",value:function(e){var t=!0,n=!1,a=void 0;try{for(var r,i=this.decoders[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var c=r.value.decode(e);if(c.status===Ue.Succeeded)return c;if(c.status===Ue.Failed)return c}}catch(l){n=!0,a=l}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}return{status:Ue.Unmatched}}}]),e}(),Ve=function(){function e(t,n){Object(X.a)(this,e),this.decodeA=t,this.decodeB=n}return Object($.a)(e,[{key:"decode",value:function(e){var t=this.decodeA.decode(e);return t.status===Ue.Succeeded?this.decodeB.decode(t.result):t}}]),e}(),Fe=n(26),He=n(24),Be=n(27),Qe=function(e){function t(){return Object(X.a)(this,t),Object(Fe.a)(this,Object(He.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this,t={provider:{title:{},description:{}}};return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(j,{pageTitle:"Add Contact (QR)",backUrl:"/contacts"}),r.a.createElement("main",null,r.a.createElement("p",null,"Do you trust the following organization?"),r.a.createElement("img",{src:"{ request.provider.logo_url }",style:{width:"20% "},alt:""}),r.a.createElement("h1",null,t.provider.title[""]),r.a.createElement("p",null,t.provider.description[""]),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("td",null,t.provider.mid_b64)),r.a.createElement("tr",null,r.a.createElement("th",null,"Website"),r.a.createElement("td",null,t.provider.website)),r.a.createElement("tr",null,r.a.createElement("th",null,"Attestation Server URL"),r.a.createElement("td",null,t.provider.url))),r.a.createElement(g,{primary:!0,onClick:function(){return e.confirmRequest()},disabled:!1},"Trust and add to contacts"),r.a.createElement(g,{onClick:function(){return e.denyRequest()},disabled:!1},"Cancel")))}},{key:"confirmRequest",value:function(){}},{key:"denyRequest",value:function(){}}]),t}(r.a.Component),Ke=function(e){function t(){return Object(X.a)(this,t),Object(Fe.a)(this,Object(He.a)(t).apply(this,arguments))}return Object(Be.a)(t,e),Object($.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(j,{pageTitle:"Verification Request",backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,"Someone wishes to verify"),r.a.createElement("p",null,{provider:{title:{},description:{}}}.mid," wishes to verify your information:"),r.a.createElement(w,{title:"Age",issuerName:"Staat der Nederlanden",imageUrl:"",value:"28",showDetails:!0}),r.a.createElement("p",null,"Do you wish to share these credentials?"),r.a.createElement("button",{className:"btn primary",onClick:function(){return e.confirmRequest()},disabled:!1},"Share and continue"),r.a.createElement("button",{className:"btn secondary",onClick:function(){return e.denyRequest()},disabled:!1},"Cancel")))}},{key:"confirmRequest",value:function(){}},{key:"denyRequest",value:function(){}}]),t}(r.a.Component),We=function(e){var t=e.providerMid,n=T().fromLanguageDict,a=M(Q(t));return a?r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(j,{pageTitle:"Contact",backUrl:"/contacts"}),r.a.createElement("main",null,r.a.createElement("img",{src:a.logo_url,alt:n(a.title)}),r.a.createElement("h1",null,n(a.title)),r.a.createElement("p",null,n(a.description)),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("td",null,a.mid_b64)),r.a.createElement("tr",null,r.a.createElement("th",null,"Website"),r.a.createElement("td",null,a.website)),r.a.createElement("tr",null,r.a.createElement("th",null,"Attestation Server URL"),r.a.createElement("td",null,r.a.createElement("a",{href:a.url+"/about"},a.url))))),r.a.createElement("h2",null,"Credentials"),r.a.createElement("p",null,n(a.title)," offers the following credentials:"),Object.values(a.recipes).map((function(e){return r.a.createElement(w,{imageUrl:a.logo_url,title:n(e.title),issuerName:n(a.title),key:e.name})})))):r.a.createElement("div",null,"Oops! Provider not found")},Ye=function(e){return r.a.createElement("div",{className:"card-item"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"logo-box"},r.a.createElement("img",{src:e.logoUrl,alt:""})),r.a.createElement("div",{className:"text-box"},r.a.createElement("div",{className:"primary"},e.title)),r.a.createElement("div",{className:"tool"},r.a.createElement("div",{className:"clickable"},r.a.createElement(p,{"info-circle":!0})))))},Ge=function(){var e=T().fromLanguageDict,t=h().services,n=M(B),i=Object(a.useState)("http://localhost"),c=Object(m.a)(i,2),s=c[0],u=c[1],o=Object(a.useState)(!1),d=Object(m.a)(o,2),f=d[0],v=d[1];return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(j,{pageTitle:"Contacts",backUrl:"/"}),r.a.createElement("main",null,r.a.createElement("h1",null,"People (",0,")"),r.a.createElement("small",null,"No people yet.."),r.a.createElement("h1",null,"Organisations (",n.length,")"),n.map((function(t){return r.a.createElement(l.b,{to:"/contacts/".concat(encodeURIComponent(t.mid_b64)),key:t.mid_b64},r.a.createElement(Ye,{logoUrl:t.logo_url,title:e(t.title)}))})),r.a.createElement("h1",null,"Add By URL"),r.a.createElement("form",{onSubmit:function(){return function(e){var n;v(!0),null===(n=t.providersService)||void 0===n||n.addByURL(e).then((function(){u("http://localhost")})).catch((function(e){alert("Failed to add that provider")})).finally((function(){return v(!1)}))}(s)}},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("input",{type:"url",className:"text-input",placeholder:"Enter the URL of the provider",required:!0,value:s,onChange:function(e){return u(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(g,{type:"submit",primary:!0,isPending:f},"Add Contact")))))},Je=function(e){return r.a.createElement("div",{className:"bottom-tools"},e.showQR?r.a.createElement(l.b,{to:"/qr"},r.a.createElement("div",{className:"fab-btn primary bottom-center",style:{fontSize:"3em"}},r.a.createElement("img",{src:n(106),alt:"",style:{width:"50%"}}))):"",e.showPlus?r.a.createElement(l.b,{className:"fab-btn secondary bottom-right",style:{fontSize:"2em"},to:"/create"},r.a.createElement(p,{plus:!0})):"")};var ze,Xe=function e(t,n){Object(X.a)(this,e),this.type=t,this.payload=n},$e=function(e){return{status:Ue.Succeeded,result:e}},Ze=function(e){return{status:Ue.Failed,error:e}};!function(e){e.INVALID_FORMAT="INVALID_FORMAT",e.INVALID_PAYLOAD="INVALID_PAYLOAD",e.UNMATCHED_TYPE="UNMATCHED_TYPE"}(ze||(ze={}));var et=function(){function e(t,n){Object(X.a)(this,e),this.decoder=void 0,this.decoder=new Ve(t,new Me(n))}return Object($.a)(e,[{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),tt=function(){function e(){Object(X.a)(this,e)}return Object($.a)(e,[{key:"encode",value:function(e){return e.type+"|"+e.payload}},{key:"decode",value:function(e){var t=e.split("|"),n=Object(m.a)(t,2),a=n[0],r=n[1];return a&&r?$e(new Xe(a,r)):Ze(ze.INVALID_FORMAT)}}]),e}(),nt=function(){function e(){Object(X.a)(this,e),this.TYPE="VerifyOffer"}return Object($.a)(e,[{key:"encode",value:function(e){return new Xe(this.TYPE,JSON.stringify(e))}},{key:"decode",value:function(e){if(e.type!==this.TYPE)return{status:Ue.Unmatched};try{var t=JSON.parse(e.payload);return t.mid&&t.attribute_hash&&t.attribute_value?$e(t):Ze(ze.INVALID_PAYLOAD)}catch(n){return Ze(ze.INVALID_FORMAT)}}}]),e}(),at=new et(new tt,[new nt]);var rt=function(e){var t=new tt;return function(n){return t.encode(e.encode(n))}}(new nt),it=function(e){var t=e.id,n=e.useReferenceQR,i=h().services,c=T().fromLanguageDict,l=M(Object(a.useMemo)((function(){return e=t,F((function(t){return H(t).find((function(t){return t.hash===e}))}),null);var e}),[t])),s=function(e){var t=Object(a.useState)(void 0),n=Object(m.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){e().then(i)}),[]),r}((function(){return i.ipv8Service.api.getMyId().catch((function(e){return console.error(e)}))})),u=Object(a.useState)(""),o=Object(m.a)(u,2),d=o[0],f=o[1],v=function(e){return console.log("Peer called to verify "+(null===l||void 0===l?void 0:l.name),e)},E=function(e,t){var n=Object(a.useState)(""),r=Object(m.a)(n,2),i=r[0],c=r[1];return Object(a.useEffect)((function(){var n=we.register(e);return n.onNewReference((function(e){return c(e.id)})),n.refreshAtInterval(t.refreshIntervalMillis),function(){return t.destroyOnUnmount?n.destroy():n.stopRefreshing()}}),[e]),i}(Object(a.useMemo)((function(){return v}),[s,l,d]),{refreshIntervalMillis:1e3}),p=s&&d?s+"|"+E:"",b=function(e){var t=Object(a.useState)(Date.now()),n=Object(m.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){return setInterval((function(){return i(Date.now())}),e),function(){return clearInterval(null)}}),[]),r}(1e3);if(!n&&s){var y={mid:s,attribute_hash:l.hash,attribute_value:l.value,attribute_name:l.name,expiresAt:b+1e4};p=s&&d?rt(y):""}return r.a.createElement("div",{className:"subpage nav-compact main-over-nav"},r.a.createElement(j,{pageTitle:"Credential",backUrl:"/"}),r.a.createElement("main",null,l?r.a.createElement(w,{title:c(l.title),issuerName:c(l.provider.title),imageUrl:l.provider.logo_url,withQRs:!0,onDisplayQR:function(e){return f(d===e?"":e)},qrValue:p,value:l.value,showDetails:!0,showMeta:!0,metadata:[{key:"Signed by",value:c(l.provider.title)},{key:"Created at",value:"".concat(l.time)},{key:"Valid until",value:"2020-09-01 13:20:00 CET"}]}):"Credential Unknown.."),r.a.createElement(Je,{showQR:!0}))},ct=function(e){var t=f().setOpen;return r.a.createElement(lt,Object.assign({openMenu:function(){return t(!0)}},e))},lt=function(e){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{src:"./assets/images/user-colored.svg",alt:""})),r.a.createElement("div",{className:"text"},r.a.createElement("div",{className:"primary"},"Tim Speelman"),r.a.createElement("div",{className:"secondary"},"Self-Sovereign Identity")),r.a.createElement("div",{className:"burger-menu",onClick:e.openMenu},r.a.createElement(p,{bars:!0}))),r.a.createElement("div",{className:"background"})),r.a.createElement("div",{className:"after-header"}," "))},st=function(){var e=M(H),t=T().fromLanguageDict;return r.a.createElement("div",null,r.a.createElement(ct,null),r.a.createElement("main",null,r.a.createElement("h1",null,"Credentials"),e.map((function(e){return r.a.createElement(l.b,{to:"/detail/".concat(encodeURIComponent(e.hash)),key:e.hash},r.a.createElement(w,{imageUrl:e.provider.logo_url,title:t(e.title),issuerName:t(e.provider.title)}))}))),r.a.createElement(Je,{showQR:!0,showPlus:!0}))},ut=n(55),ot=n.n(ut),mt=function(e){var t=e.onScanQR,n=Object(a.useState)(""),i=Object(m.a)(n,2),c=i[0],s=i[1],u=Object(a.useState)(""),o=Object(m.a)(u,2),d=o[0],f=o[1],v=Object(a.useState)(!1),h=Object(m.a)(v,2),E=h[0],b=h[1];return r.a.createElement("div",{className:"subpage nav-compact"},r.a.createElement(j,{pageTitle:"Scan QR",backUrl:"/"}),r.a.createElement("main",{className:"text-center"},r.a.createElement("h1",null,"Scan a QR"),E?r.a.createElement("form",{onSubmit:function(){return t(d)}},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("input",{type:"text",className:"text-input",placeholder:"Enter the QR value",required:!0,value:d,onChange:function(e){return f(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(g,{type:"submit",primary:!0},"Submit"),r.a.createElement(g,{onClick:function(){return b(!1)}},"Cancel"))):c?r.a.createElement("div",null,r.a.createElement("p",null,"I got this:"),r.a.createElement(k.a,{value:c,size:256,level:"M"}),r.a.createElement("p",null,"Meaning: ",r.a.createElement("code",null,c)),r.a.createElement(g,{primary:!0,onClick:function(){return t(c)}},"Submit"),r.a.createElement(g,{onClick:function(){return s("")}},"Try again")):r.a.createElement("div",null,r.a.createElement("p",null,"Find or draw a ",r.a.createElement(p,{qrcode:!0})," and scan it."),r.a.createElement(ot.a,{delay:300,onError:function(e){console.error(e)},onScan:function(e){e&&s(e)},style:{width:"100%"}}),r.a.createElement("p",{className:"clickable",onClick:function(){return b(!0)}},"Or try entering manually")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(l.b,{to:"/"},r.a.createElement(g,null,"Never mind"))))},dt=function(){var e=h(),t=e.ready,n=e.error,a=Object(s.f)();return t?r.a.createElement("div",null,r.a.createElement(b,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/x"},r.a.createElement(_,null)),r.a.createElement(s.a,{path:"/create"},r.a.createElement(_e,null)),r.a.createElement(s.a,{path:"/verify/:offer"},r.a.createElement(ft,null)),r.a.createElement(s.a,{path:"/detail/:id"},r.a.createElement(vt,null)),r.a.createElement(s.a,{path:"/contacts/:mid"},r.a.createElement(ht,null)),r.a.createElement(s.a,{path:"/contacts"},r.a.createElement(Ge,null)),r.a.createElement(s.a,{path:"/confirm-contact"},r.a.createElement(Qe,null)),r.a.createElement(s.a,{path:"/confirm-verify"},r.a.createElement(Ke,null)),r.a.createElement(s.a,{path:"/qr"},r.a.createElement(mt,{onScanQR:function(e){var t=at.decode(e);t.status===Ue.Succeeded&&a.push("/verify/"+encodeURIComponent(JSON.stringify(t.result)))}})),r.a.createElement(s.a,{path:"/"},r.a.createElement(st,null)))):n?r.a.createElement("div",null,"Oops! Is the localhost offline?"):r.a.createElement("div",null,"Connecting to services..")};function ft(){var e=Object(s.g)();return r.a.createElement(Le,{verifyOffer:JSON.parse(decodeURIComponent(e.offer))})}function vt(){var e=Object(s.g)();return r.a.createElement(it,{id:decodeURIComponent(e.id)})}function ht(){var e=Object(s.g)();return r.a.createElement(We,{providerMid:decodeURIComponent(e.mid)})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Et=r.a.createElement((function(e){var t=e.children,n=e.initServices,i=e.path,c=Object(a.useState)(null),l=Object(m.a)(c,2),s=l[0],u=l[1],o=Object(a.useState)(null),d=Object(m.a)(o,2),f=d[0],h=d[1];Object(a.useEffect)((function(){n().then((function(e){return u(e)})).catch(h)}),[]);var E={ready:!!s,error:f,services:s,path:i};return r.a.createElement(v.Provider,{value:E},t)}),{initServices:function(){return Se.api.getMyId().then((function(e){console.log("TCL: mid",e),Re=new me(ke);var t=new ne.b.OWVerifiee(Se.verifieeService),n=new ne.b.OWAttestee(Se.attesteeService),a=new ne.c.RecipeClient(e,t,n);return Ie=new oe(Re,ke,Se,a),{localAPI:Oe,localState:ke,ipv8Service:Se,attributeService:Ne,callbackService:we,providersService:Re,owService:Ie}}))},path:ge},r.a.createElement((function(e){var t=e.children,n=Object(a.useState)(!1),i=Object(m.a)(n,2),c={open:i[0],setOpen:i[1]};return r.a.createElement(d.Provider,{value:c},t)}),null,r.a.createElement((function(e){var t,n=e.children,i=e.fallbackLangs,c=Object(a.useState)("nl_NL"),l=Object(m.a)(c,2),s=l[0],u={langCode:s,setLanguage:l[1],translate:function(e){return e},fromLanguageDict:(t=[s].concat(Object(R.a)(i)),function(e){var n=Object.keys(e),a=function(e,t){var n=t.find((function(t){return e.indexOf(t)>=0}));return n||e[0]}(n,t);return e[a]})};return r.a.createElement(I.Provider,{value:u},n)}),{fallbackLangs:["en_US","en_UK"]},r.a.createElement((function(e){var t=e.localState,n=e.children,i=Object(a.useState)(t.state),c=Object(m.a)(i,2),l=c[0],s=c[1];return Object(a.useEffect)((function(){t.stateChangeHook.on(s)}),[t]),r.a.createElement(x.Provider,{value:{state:l}},n)}),{localState:ke},r.a.createElement((function(){return r.a.createElement(l.a,null,r.a.createElement(dt,null))}),null)))));c.a.render(Et,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},33:function(e,t,n){},34:function(e,t,n){},58:function(e,t,n){e.exports=n(111)}},[[58,1,2]]]);
//# sourceMappingURL=main.17bbb405.chunk.js.map